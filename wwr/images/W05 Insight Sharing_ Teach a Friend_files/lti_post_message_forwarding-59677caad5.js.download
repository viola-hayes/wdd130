const handler=(s,a,c,w)=>n=>{let t;try{t="string"==typeof n.data?JSON.parse(n.data):n.data}catch(e){return!1}if(n.origin===s){const{sourceToolInfo:o,...d}=t;if(!o)return!1;var e=o?.origin;const i=a[o?.windowId];i?.postMessage(d,e)}else{let e=a.indexOf(n.source);-1===e&&(a.push(n.source),e=a.length-1);const r={...t,sourceToolInfo:{origin:n.origin,windowId:e}};w&&(r.in_rce=!0),c?.postMessage(r,s)}},ready=e=>{const n="object"==typeof document&&document;if(!n||/^loaded|^i|^c/.test(n.readyState))e();else{const t=()=>{e(),n.removeEventListener("DOMContentLoaded",t)};n.addEventListener("DOMContentLoaded",t)}},init=()=>{ready(()=>{var{PARENT_ORIGIN:e,IN_RCE:n}=window.ENV,t=[];n?(n=window.parent.parent,window.addEventListener("message",handler(window.origin,t,n,!0))):window.addEventListener("message",handler(e,t,window.top))})};"undefined"==typeof jest?init():module.exports={handler:handler,init:init};
//# sourceMappingURL=../maps/javascripts/lti_post_message_forwarding-59677caad5.js.map
